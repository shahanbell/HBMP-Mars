"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
var eventChannel;
var d = new Date();
Page({
    data: {
        bizEmployee: null,
        bizEmployeeName: null,
        bizDate: d.toISOString().substring(0, 10),
        bizTime1: "08:00",
        bizTime2: "17:10",
        bizObject: "",
        bizAddress: "",
        bizContent: "",
        showDate1: false,
        showRowDate1: new Date().getTime(),
        showTime1: false,
        showTime2: false,
        formatter: function (type, value) {
            if (type === 'year') {
                return value + "\u5E74";
            }
            else if (type === 'month') {
                return value + "\u6708";
            }
            else if (type === 'day') {
                return value + "\u65E5";
            }
            return value;
        },
        conpomentid: '',
        showDateInit: ''
    },
    onLoad: function () {
        var _this_1 = this;
        wx.showLoading({
            title: '加载中',
        });
        setTimeout(function () {
            wx.hideLoading();
        }, 2000);
        eventChannel = this.getOpenerEventChannel();
        eventChannel.on('openDetail', function (res) {
            if (res.isNew) {
                _this_1.setData({
                    bizEmployee: res.data.bizEmployee,
                    bizEmployeeName: res.data.bizEmployeeName,
                    isNew: res.isNew
                });
            }
            else {
                _this_1.setData({
                    bizEmployee: res.data.bizEmployee,
                    bizEmployeeName: res.data.bizEmployeeName,
                    bizDate: res.data.bizDate,
                    bizTime1: res.data.bizTime1,
                    bizTime2: res.data.bizTime2,
                    bizObject: res.data.bizObject,
                    bizAddress: res.data.bizAddress,
                    bizContent: res.data.bizContent,
                });
            }
        });
    },
    bindDeptSelect: function (e) {
        var _this = this;
        wx.navigateTo({
            url: '../deptSelect/deptSelect?employeeid=' + app.globalData.employeeId,
            events: {
                returnDeptSelect: function (res) {
                    if (res) {
                        _this.setData({
                            deptId: res.k,
                            deptName: res.k + '-' + res.v
                        });
                    }
                }
            },
            success: function (res) {
                console.log(res);
            }
        });
    },
    bindBizObjectChange: function (e) {
        this.setData({
            bizObject: e.detail
        });
    },
    bindBizAddressChange: function (e) {
        this.setData({
            bizAddress: e.detail
        });
    },
    bindBizContentChange: function (e) {
        this.setData({
            bizContent: e.detail
        });
    },
    bindPickerDate1: function (e) {
        this.setData({
            showRowDate1: this.formatYYMMDDToDate(this.data.bizDate)
        });
        this.openPickerDate1();
    },
    bindCloseDate1: function (e) {
        this.closePickerDate1();
    },
    bindDate1Cancel: function (e) {
        this.closePickerDate1();
    },
    bindDate1Confirm: function (e) {
        if (e.detail != 1262275200000) {
            this.setData({
                bizDate: this.dateFormatForYYMMDD(e.detail)
            });
        }
        this.closePickerDate1();
    },
    openPickerDate1: function () {
        this.setData({
            showDate1: true
        });
    },
    closePickerDate1: function () {
        this.setData({
            showDate1: false
        });
    },
    bindPickerTime1: function (e) {
        this.openPickerTime1();
    },
    bindCloseTime1: function (e) {
        this.closePickerTime1();
    },
    bindTime1Cencel: function (e) {
        this.closePickerTime1();
    },
    bindTime1Confirm: function (e) {
        this.setData({
            bizTime1: e.detail
        });
        this.closePickerTime1();
    },
    openPickerTime1: function () {
        this.setData({
            showTime1: true
        });
    },
    closePickerTime1: function () {
        this.setData({
            showTime1: false
        });
    },
    bindPickerTime2: function (e) {
        this.openPickerTime2();
    },
    bindCloseTime2: function (e) {
        this.closePickerTime2();
    },
    bindTime2Cencel: function (e) {
        this.closePickerTime2();
    },
    bindTime2Confirm: function (e) {
        this.setData({
            bizTime2: e.detail
        });
        this.closePickerTime2();
    },
    openPickerTime2: function () {
        this.setData({
            showTime2: true
        });
    },
    closePickerTime2: function () {
        this.setData({
            showTime2: false
        });
    },
    formatYYMMDDToDate: function (value) {
        var str = value.replace(/-/g, '/');
        var date = new Date(str);
        return date.getTime();
    },
    dateFormatForYYMMDD: function (date) {
        var dateTemp = new Date(date);
        var year = dateTemp.getFullYear();
        var month = dateTemp.getMonth() + 1;
        var day = dateTemp.getDate();
        var hour = dateTemp.getHours();
        var minute = dateTemp.getMinutes();
        var dayTemp = year + "-" + month + "-" + day;
        return dayTemp;
    },
    formSubmit: function (e) {
        var canSubmit = true;
        if (this.data.bizObject == '' || this.data.bizAddress == '' || this.data.bizContent == '') {
            canSubmit = false;
        }
        if (canSubmit) {
            var newObject = {
                bizEmployee: this.data.bizEmployee,
                bizEmployeeName: this.data.bizEmployeeName,
                bizDate: this.data.bizDate,
                bizTime1: this.data.bizTime1,
                bizTime2: this.data.bizTime2,
                bizObject: this.data.bizObject,
                bizAddress: this.data.bizAddress,
                bizContent: this.data.bizContent
            };
            eventChannel = this.getOpenerEventChannel();
            eventChannel.emit('returnDetail', { data: newObject, isNew: false });
            wx.navigateBack({
                delta: 1
            });
        }
        else {
            wx.showModal({
                title: '系统提示',
                content: '有必填项未填',
                showCancel: false
            });
        }
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVzaW5lc3N0cmlwZGV0YWlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYnVzaW5lc3N0cmlwZGV0YWlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsSUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFVLENBQUE7QUFDNUIsSUFBSSxZQUFZLENBQUE7QUFDaEIsSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQTtBQUNsQixJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFDSixXQUFXLEVBQUUsSUFBSTtRQUNqQixlQUFlLEVBQUUsSUFBSTtRQUNyQixPQUFPLEVBQUUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQ3pDLFFBQVEsRUFBRSxPQUFPO1FBQ2pCLFFBQVEsRUFBRSxPQUFPO1FBQ2pCLFNBQVMsRUFBRSxFQUFFO1FBQ2IsVUFBVSxFQUFFLEVBQUU7UUFDZCxVQUFVLEVBQUUsRUFBRTtRQUNkLFNBQVMsRUFBRSxLQUFLO1FBQ2hCLFlBQVksRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRTtRQUNsQyxTQUFTLEVBQUMsS0FBSztRQUNmLFNBQVMsRUFBRSxLQUFLO1FBQ2hCLFNBQVMsWUFBQyxJQUFJLEVBQUUsS0FBSztZQUNuQixJQUFJLElBQUksS0FBSyxNQUFNLEVBQUU7Z0JBQ25CLE9BQVUsS0FBSyxXQUFHLENBQUM7YUFDcEI7aUJBQU0sSUFBSSxJQUFJLEtBQUssT0FBTyxFQUFFO2dCQUMzQixPQUFVLEtBQUssV0FBRyxDQUFDO2FBQ3BCO2lCQUFNLElBQUksSUFBSSxLQUFLLEtBQUssRUFBRTtnQkFDekIsT0FBVSxLQUFLLFdBQUcsQ0FBQzthQUNwQjtZQUNELE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUNELFdBQVcsRUFBRSxFQUFFO1FBQ2YsWUFBWSxFQUFDLEVBQUU7S0FDaEI7SUFDRCxNQUFNO1FBQU4sbUJBNEJDO1FBM0JDLEVB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Q0FBQyxjQUFjLEVBQUUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBQyxLQUFLLEVBQUMsQ0FBQyxDQUFBO1lBQ2xFLEVBQUUsQ0FBQyxZQUFZLENBQUM7Z0JBQ2QsS0FBSyxFQUFFLENBQUM7YUFDVCxDQUFDLENBQUE7U0FDSDthQUFNO1lBQ0wsRUFBRSxDQUFDLFNBQVMsQ0FBQztnQkFDWCxLQUFLLEVBQUUsTUFBTTtnQkFDYixPQUFPLEVBQUUsUUFBUTtnQkFDakIsVUFBVSxFQUFFLEtBQUs7YUFDbEIsQ0FBQyxDQUFBO1NBQ0g7SUFDSCxDQUFDO0NBRUYsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU15QXBwIH0gZnJvbSAnLi4vLi4vLi4vYXBwJ1xyXG5cclxuY29uc3QgYXBwID0gZ2V0QXBwPElNeUFwcD4oKVxyXG5sZXQgZXZlbnRDaGFubmVsXHJcbmxldCBkID0gbmV3IERhdGUoKVxyXG5QYWdlKHtcclxuICBkYXRhOiB7XHJcbiAgICBiaXpFbXBsb3llZTogbnVsbCxcclxuICAgIGJpekVtcGxveWVlTmFtZTogbnVsbCxcclxuICAgIGJpekRhdGU6IGQudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApLFxyXG4gICAgYml6VGltZTE6IFwiMDg6MDBcIixcclxuICAgIGJpelRpbWUyOiBcIjE3OjEwXCIsXHJcbiAgICBiaXpPYmplY3Q6IFwiXCIsXHJcbiAgICBiaXpBZGRyZXNzOiBcIlwiLFxyXG4gICAgYml6Q29udGVudDogXCJcIixcclxuICAgIHNob3dEYXRlMTogZmFsc2UsXHJcbiAgICBzaG93Um93RGF0ZTE6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxyXG4gICAgc2hvd1RpbWUxOmZhbHNlLFxyXG4gICAgc2hvd1RpbWUyOiBmYWxzZSxcclxuICAgIGZvcm1hdHRlcih0eXBlLCB2YWx1ZSkge1xyXG4gICAgICBpZiAodHlwZSA9PT0gJ3llYXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfeW5tGA7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ21vbnRoJykge1xyXG4gICAgICAgIHJldHVybiBgJHt2YWx1ZX3mnIhgO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkYXknKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfeaXpWA7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfSxcclxuICAgIGNvbnBvbWVudGlkOiAnJyxcclxuICAgIHNob3dEYXRlSW5pdDonJ1xyXG4gIH0sXHJcbiAgb25Mb2FkKCkge1xyXG4gICAgd3guc2hvd0xvYWRpbmcoe1xyXG4gICAgICB0aXRsZTogJ+WKoOi9veS4rScsXHJcbiAgICB9KVxyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHd4LmhpZGVMb2FkaW5nKClcclxuICAgIH0sIDIwMDApXHJcbiAgICBldmVudENoYW5uZWwgPSB0aGlzLmdldE9wZW5lckV2ZW50Q2hhbm5lbCgpXHJcbiAgICBldmVudENoYW5uZWwub24oJ29wZW5EZXRhaWwnLCAocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMuaXNOZXcpIHtcclxuICAgICAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgICAgIGJpekVtcGxveWVlOiByZXMuZGF0YS5iaXpFbXBsb3llZSxcclxuICAgICAgICAgIGJpekVtcGxveWVlTmFtZTogcmVzLmRhdGEuYml6RW1wbG95ZWVOYW1lLFxyXG4gICAgICAgICAgaXNOZXc6IHJlcy5pc05ld1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgICAgICBiaXpFbXBsb3llZTogcmVzLmRhdGEuYml6RW1wbG95ZWUsXHJcbiAgICAgICAgICBiaXpFbXBsb3llZU5hbWU6IHJlcy5kYXRhLmJpekVtcGxveWVlTmFtZSxcclxuICAgICAgICAgIGJpekRhdGU6IHJlcy5kYXRhLmJpekRhdGUsXHJcbiAgICAgICAgICBiaXpUaW1lMTogcmVzLmRhdGEuYml6VGltZTEsXHJcbiAgICAgICAgICBiaXpUaW1lMjogcmVzLmRhdGEuYml6VGltZTIsXHJcbiAgICAgICAgICBiaXpPYmplY3Q6IHJlcy5kYXRhLmJpek9iamVjdCxcclxuICAgICAgICAgIGJpekFkZHJlc3M6IHJlcy5kYXRhLmJpekFkZHJlc3MsXHJcbiAgICAgICAgICBiaXpDb250ZW50OiByZXMuZGF0YS5iaXpDb250ZW50LFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSxcclxuICBiaW5kRGVwdFNlbGVjdChlKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzXHJcbiAgICB3eC5uYXZpZ2F0ZVRvKHtcclxuICAgICAgdXJsOiAnLi4vZGVwdFNlbGVjdC9kZXB0U2VsZWN0P2VtcGxveWVlaWQ9JyArIGFwcC5nbG9iYWxEYXRhLmVtcGxveWVlSWQsXHJcbiAgICAgIGV2ZW50czoge1xyXG4gICAgICAgIHJldHVybkRlcHRTZWxlY3Q6IGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2V0RGF0YSEoe1xyXG4gICAgICAgICAgICAgIGRlcHRJZDogcmVzLmssXHJcbiAgICAgICAgICAgICAgZGVwdE5hbWU6IHJlcy5rICsgJy0nICsgcmVzLnZcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3MocmVzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH0sXHJcblxyXG4gIGJpbmRCaXpPYmplY3RDaGFuZ2UoZSkge1xyXG4gICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgIGJpek9iamVjdDogZS5kZXRhaWxcclxuICAgIH0pXHJcbiAgfSxcclxuICBiaW5kQml6QWRkcmVzc0NoYW5nZShlKSB7XHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgYml6QWRkcmVzczogZS5kZXRhaWxcclxuICAgIH0pXHJcbiAgfSxcclxuICBiaW5kQml6Q29udGVudENoYW5nZShlKSB7XHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgYml6Q29udGVudDogZS5kZXRhaWxcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgXHJcbiAgLy/lh7rlt67ml6XmnJ/ml7bpl7Tnu4Tku7bkuovku7ZcclxuICBiaW5kUGlja2VyRGF0ZTEoZSkge1xyXG4gICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgIHNob3dSb3dEYXRlMTogdGhpcy5mb3JtYXRZWU1NRERUb0RhdGUodGhpcy5kYXRhLmJpekRhdGUpXHJcbiAgICB9KVxyXG4gICAgdGhpcy5vcGVuUGlja2VyRGF0ZTEoKTtcclxuICB9LFxyXG4gIGJpbmRDbG9zZURhdGUxKGUpIHtcclxuICAgIHRoaXMuY2xvc2VQaWNrZXJEYXRlMSgpO1xyXG4gIH0sXHJcblxyXG4gIGJpbmREYXRlMUNhbmNlbChlKSB7XHJcbiAgICB0aGlzLmNsb3NlUGlja2VyRGF0ZTEoKTtcclxuICB9LFxyXG4gIGJpbmREYXRlMUNvbmZpcm0oZSkge1xyXG4gICAgaWYgKGUuZGV0YWlsICE9IDEyNjIyNzUyMDAwMDApIHtcclxuICAgICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgICAgYml6RGF0ZTogdGhpcy5kYXRlRm9ybWF0Rm9yWVlNTUREKGUuZGV0YWlsKVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgdGhpcy5jbG9zZVBpY2tlckRhdGUxKCk7XHJcbiAgfSxcclxuICBvcGVuUGlja2VyRGF0ZTEoKSB7XHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgc2hvd0RhdGUxOiB0cnVlXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgY2xvc2VQaWNrZXJEYXRlMSgpIHtcclxuICAgIHRoaXMuc2V0RGF0YSEoe1xyXG4gICAgICBzaG93RGF0ZTE6IGZhbHNlXHJcbiAgICB9KVxyXG4gIH0sXHJcbi8v5byA5aeL5pe26Ze057uE5Lu25LqL5Lu2XHJcbiAgYmluZFBpY2tlclRpbWUxKGUpIHtcclxuICAgIHRoaXMub3BlblBpY2tlclRpbWUxKCk7XHJcbiAgfSxcclxuICBiaW5kQ2xvc2VUaW1lMShlKSB7XHJcbiAgICB0aGlzLmNsb3NlUGlja2VyVGltZTEoKTtcclxuICB9LFxyXG4gIGJpbmRUaW1lMUNlbmNlbChlKSB7XHJcbiAgICB0aGlzLmNsb3NlUGlja2VyVGltZTEoKTtcclxuICB9LFxyXG4gIGJpbmRUaW1lMUNvbmZpcm0oZSkge1xyXG4gICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgIGJpelRpbWUxOiBlLmRldGFpbFxyXG4gICAgfSlcclxuICAgIHRoaXMuY2xvc2VQaWNrZXJUaW1lMSgpO1xyXG4gIH0sXHJcbiBcclxuICBvcGVuUGlja2VyVGltZTEoKSB7XHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgc2hvd1RpbWUxOiB0cnVlXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgY2xvc2VQaWNrZXJUaW1lMSgpIHtcclxuICAgIHRoaXMuc2V0RGF0YSEoe1xyXG4gICAgICBzaG93VGltZTE6IGZhbHNlXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgLy/miKrmraLml7bpl7Tnu4Tku7bkuovku7ZcclxuICBiaW5kUGlja2VyVGltZTIoZSkge1xyXG4gICAgdGhpcy5vcGVuUGlja2VyVGltZTIoKTtcclxuICB9LFxyXG4gIGJpbmRDbG9zZVRpbWUyKGUpIHtcclxuICAgIHRoaXMuY2xvc2VQaWNrZXJUaW1lMigpO1xyXG4gIH0sXHJcbiAgYmluZFRpbWUyQ2VuY2VsKGUpIHtcclxuICAgIHRoaXMuY2xvc2VQaWNrZXJUaW1lMigpO1xyXG4gIH0sXHJcbiAgYmluZFRpbWUyQ29uZmlybShlKSB7XHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgYml6VGltZTI6IGUuZGV0YWlsXHJcbiAgICB9KVxyXG4gICAgdGhpcy5jbG9zZVBpY2tlclRpbWUyKCk7XHJcbiAgfSxcclxuXHJcbiAgb3BlblBpY2tlclRpbWUyKCkge1xyXG4gICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgIHNob3dUaW1lMjogdHJ1ZVxyXG4gICAgfSlcclxuICB9LFxyXG4gIGNsb3NlUGlja2VyVGltZTIoKSB7XHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgc2hvd1RpbWUyOiBmYWxzZVxyXG4gICAgfSlcclxuICB9LFxyXG5cclxuICBmb3JtYXRZWU1NRERUb0RhdGUodmFsdWUpIHtcclxuICAgIHZhciBzdHIgPSB2YWx1ZS5yZXBsYWNlKC8tL2csICcvJyk7XHJcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHN0cilcclxuICAgIHJldHVybiBkYXRlLmdldFRpbWUoKTtcclxuICB9LFxyXG5cclxuICBkYXRlRm9ybWF0Rm9yWVlNTUREKGRhdGUpIHtcclxuICAgIGxldCBkYXRlVGVtcCA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgbGV0IHllYXIgPSBkYXRlVGVtcC5nZXRGdWxsWWVhcigpO1xyXG4gICAgbGV0IG1vbnRoID0gZGF0ZVRlbXAuZ2V0TW9udGgoKSArIDE7XHJcbiAgICBsZXQgZGF5ID0gZGF0ZVRlbXAuZ2V0RGF0ZSgpO1xyXG4gICAgbGV0IGhvdXIgPSBkYXRlVGVtcC5nZXRIb3VycygpO1xyXG4gICAgbGV0IG1pbnV0ZSA9IGRhdGVUZW1wLmdldE1pbnV0ZXMoKTtcclxuICAgIGxldCBkYXlUZW1wID0geWVhciArIFwiLVwiICsgbW9udGggKyBcIi1cIiArIGRheTtcclxuICAgIHJldHVybiBkYXlUZW1wO1xyXG4gIH0sXHJcblxyXG5cclxuICBmb3JtU3VibWl0KGUpIHtcclxuICAgIGxldCBjYW5TdWJtaXQgPSB0cnVlXHJcbiAgICBpZiAodGhpcy5kYXRhLmJpek9iamVjdCA9PSAnJyB8fCB0aGlzLmRhdGEuYml6QWRkcmVzcz09ICcnIHx8IHRoaXMuZGF0YS5iaXpDb250ZW50PT0nJyl7XHJcbiAgICAgIGNhblN1Ym1pdD1mYWxzZVxyXG4gICAgfVxyXG4gICAgaWYgKGNhblN1Ym1pdCkge1xyXG4gICAgICBsZXQgbmV3T2JqZWN0ID0ge1xyXG4gICAgICAgIGJpekVtcGxveWVlOiB0aGlzLmRhdGEuYml6RW1wbG95ZWUsXHJcbiAgICAgICAgYml6RW1wbG95ZWVOYW1lOiB0aGlzLmRhdGEuYml6RW1wbG95ZWVOYW1lLFxyXG4gICAgICAgIGJpekRhdGU6IHRoaXMuZGF0YS5iaXpEYXRlLFxyXG4gICAgICAgIGJpelRpbWUxOiB0aGlzLmRhdGEuYml6VGltZTEsXHJcbiAgICAgICAgYml6VGltZTI6IHRoaXMuZGF0YS5iaXpUaW1lMixcclxuICAgICAgICBiaXpPYmplY3Q6IHRoaXMuZGF0YS5iaXpPYmplY3QsXHJcbiAgICAgICAgYml6QWRkcmVzczogdGhpcy5kYXRhLmJpekFkZHJlc3MsXHJcbiAgICAgICAgYml6Q29udGVudDogdGhpcy5kYXRhLmJpekNvbnRlbnRcclxuICAgICAgfVxyXG4gICAgICBldmVudENoYW5uZWwgPSB0aGlzLmdldE9wZW5lckV2ZW50Q2hhbm5lbCgpXHJcbiAgICAgIGV2ZW50Q2hhbm5lbC5lbWl0KCdyZXR1cm5EZXRhaWwnLCB7IGRhdGE6IG5ld09iamVjdCwgaXNOZXc6ZmFsc2V9KVxyXG4gICAgICB3eC5uYXZpZ2F0ZUJhY2soe1xyXG4gICAgICAgIGRlbHRhOiAxXHJcbiAgICAgIH0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB3eC5zaG93TW9kYWwoe1xyXG4gICAgICAgIHRpdGxlOiAn57O757uf5o+Q56S6JyxcclxuICAgICAgICBjb250ZW50OiAn5pyJ5b+F5aGr6aG55pyq5aGrJyxcclxuICAgICAgICBzaG93Q2FuY2VsOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pXHJcbiJdfQ==