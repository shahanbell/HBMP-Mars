"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
var eventChannel;
var d = new Date();
Page({
    data: {
        employeeId: null,
        employeeName: null,
        deptId: null,
        deptName: null,
        ycrq: d.toISOString().substring(0, 10),
        kr: '',
        contact: '',
        cfsf: "",
        cfcs: "",
        address1: "",
        mdsf: "",
        mdcs: "",
        address2: "",
        sy: '',
        keyuser: '',
        showTime: false,
        showDateInit: new Date().getTime(),
        formatter: function (type, value) {
            if (type === 'year') {
                return value + "\u5E74";
            }
            else if (type === 'month') {
                return value + "\u6708";
            }
            else if (type === 'day') {
                return value + "\u65E5";
            }
            return value;
        },
        company: ""
    },
    onLoad: function () {
        var _this = this;
        wx.showLoading({
            title: '加载中',
        });
        eventChannel = this.getOpenerEventChannel();
        eventChannel.on('openDetail', function (res) {
            if (res.isNew) {
                _this.setData({
                    employeeId: app.globalData.employeeId,
                    employeeName: app.globalData.employeeName,
                    deptId: app.globalData.defaultDeptId,
                    deptName: app.globalData.defaultDeptName
                });
            }
            else {
                _this.setData({
                    employeeId: res.data.employeeId,
                    employeeName: res.data.employeeName,
                    deptId: res.data.deptId,
                    deptName: res.data.deptName,
                    ycrq: res.data.ycrq,
                    kr: res.data.kr,
                    contact: res.data.contact,
                    cfsf: res.data.cfsf,
                    cfcs: res.data.cfcs,
                    address1: res.data.address1,
                    mdsf: res.data.mdsf,
                    mdcs: res.data.mdcs,
                    address2: res.data.address2,
                    sy: res.data.sy,
                    company: res.data.company
                });
            }
        });
        wx.hideLoading();
    },
    sltwordInput: function (e) {
        this.setData({
            keyuser: e.detail.value
        });
    },
    bindUserSelect: function (e) {
        var that = this;
        wx.navigateTo({
            url: '../../../pages/userSelect/userSelect?userInfo=' + userInput,
            events: {
                returnUserSelect: function (res) {
                    if (res) {
                        that.setData({
                            employeeId: res.k,
                            employeeName: res.v
                        });
                    }
                }
            },
            success: function (res) {
                console.log(res);
            }
        });
    },
    bindDeptSelect: function (e) {
        var that = this;
        wx.navigateTo({
            url: '../deptSelect/deptSelect?employeeid=' + this.data.employeeId,
            events: {
                returnDeptSelect: function (res) {
                    if (res) {
                        that.setData({
                            deptId: res.k,
                            deptName: res.k + '-' + res.v
                        });
                    }
                }
            },
            success: function (res) {
                console.log(res);
            }
        });
    },
    bindOvertimeChange: function (e) {
        this.setData({
            hour: e.detail.value
        });
    },
    bindKrChange: function (e) {
        this.setData({
            kr: e.detail
        });
    },
    bindContactChange: function (e) {
        this.setData({
            contact: e.detail
        });
    },
    bindCfsfChange: function (e) {
        this.setData({
            cfsf: e.detail
        });
    },
    bindCfcsChange: function (e) {
        this.setData({
            cfcs: e.detail
        });
    },
    bindAddress1Change: function (e) {
        this.setData({
            address1: e.detail
        });
    },
    bindMdsfChange: function (e) {
        this.setData({
            mdsf: e.detail
        });
    },
    bindMdcsChange: function (e) {
        this.setData({
            mdcs: e.detail
        });
    },
    bindAddress2Change: function (e) {
        this.setData({
            address2: e.detail
        });
    },
    bindCompanyChange: function (e) {
        this.setData({
            company: e.detail
        });
    },
    bindSyChange: function (e) {
        this.setData({
            sy: e.detail.value
        });
    },
    bindPickerDate: function (e) {
        this.openPickerDate();
    },
    bindCloseDate: function (e) {
        this.closePickerDate();
    },
    bindDateCancel: function (e) {
        this.closePickerDate();
    },
    bindDateConfirm: function (e) {
        this.setData({
            ycrq: this.dateFormatForYYMMDD(e.detail)
        });
        this.closePickerDate();
    },
    openPickerDate: function () {
        this.setData({
            showDate: true
        });
    },
    closePickerDate: function () {
        this.setData({
            showDate: false
        });
    },
    dateFormatForYYMMDD: function (date) {
        var dateTemp = new Date(date);
        var year = dateTemp.getFullYear();
        var month = dateTemp.getMonth() + 1;
        var day = dateTemp.getDate();
        var hour = dateTemp.getHours();
        var minute = dateTemp.getMinutes();
        var dayTemp = year + "-" + month + "-" + day;
        return dayTemp;
    },
    formSubmit: function (e) {
        var errmsg = '';
        if (this.data.ycrq == '') {
            errmsg += "请选择用车日期\r\n";
        }
        if (this.data.cfsf == '') {
            errmsg += "请输入出发省份\r\n";
        }
        if (this.data.cfcs == '') {
            errmsg += "请输入出发城市\r\n";
        }
        if (this.data.address1 == '') {
            errmsg += "请输入出发详细地址\r\n";
        }
        if (this.data.mdsf == '') {
            errmsg += "请输入目的省份\r\n";
        }
        if (this.data.mdcs == '') {
            errmsg += "请输入目的城市\r\n";
        }
        if (this.data.address2 == '') {
            errmsg += "请输入目的详细地址\r\n";
        }
        if (this.data.sy == '') {
            errmsg += "请输入事由\r\n";
        }
        if (errmsg != '') {
            wx.showModal({
                title: '系统提示',
                content: errmsg,
                showCancel: false
            });
            return;
        }
        var newObject = {
            employeeId: this.data.employeeId,
            employeeName: this.data.employeeName,
            deptId: this.data.deptId,
            deptName: this.data.deptName,
            ycrq: this.data.ycrq,
            kr: this.data.kr,
            contact: this.data.contact,
            cfsf: this.data.cfsf,
            cfcs: this.data.cfcs,
            address1: this.data.address1,
            mdsf: this.data.mdsf,
            mdcs: this.data.mdcs,
            address2: this.data.address2,
            sy: this.data.sy,
            company: this.data.company
        };
        eventChannel = this.getOpenerEventChannel();
        eventChannel.emit('returnDetail', { data: newObject, isNew: true });
        wx.navigateBack({
            delta: 1
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FyYXBwZGV0YWlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2FyYXBwZGV0YWlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBR0EsSUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFVLENBQUE7QUFDNUIsSUFBSSxZQUFZLENBQUE7QUFDaEIsSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQTtBQUNsQixJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFDSixVQUFVLEVBQUUsSUFBSTtRQUNoQixZQUFZLEVBQUUsSUFBSTtRQUNsQixNQUFNLEVBQUUsSUFBSTtRQUNaLFFBQVEsRUFBRSxJQUFJO1FBQ2QsSUFBSSxFQUFFLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUN0QyxFQUFFLEVBQUUsRUFBRTtRQUNOLE9BQU8sRUFBRSxFQUFFO1FBQ1gsSUFBSSxFQUFFLEVBQUU7UUFDUixJQUFJLEVBQUUsRUFBRTtRQUNSLFFBQVEsRUFBRSxFQUFFO1FBQ1osSUFBSSxFQUFFLEVBQUU7UUFDUixJQUFJLEVBQUUsRUFBRTtRQUNSLFFBQVEsRUFBRSxFQUFFO1FBQ1osRUFBRSxFQUFFLEVBQUU7UUFDTixPQUFPLEVBQUUsRUFBRTtRQUNYLFFBQVEsRUFBRSxLQUFLO1FBQ2YsWUFBWSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFO1FBQ2xDLFNBQVMsWUFBQyxJQUFJLEVBQUUsS0FBSztZQUNuQixJQUFJLElBQUksS0FBSyxNQUFNLEVBQUU7Z0JBQ25CLE9BQVUsS0FBSyxXQUFHLENBQUM7YUFDcEI7aUJBQU0sSUFBSSxJQUFJLEtBQUssT0FBTyxFQUFFO2dCQUMzQixPQUFVLEtBQUssV0FBRyxDQUFDO2FBQ3BCO2lCQUFNLElBQUksSUFBSSxLQUFLLEtBQUssRUFBRTtnQkFDekIsT0FBVSxLQUFLLFdBQUcsQ0FBQzthQUNwQjtZQUNELE9BQU8sS0FBSyxDQUFDO1FB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Q0FBQyxJQUFJO1lBQ3BCLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFDcEIsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtZQUM1QixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO1lBQ3BCLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFDcEIsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtZQUM1QixFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ2hCLE9BQU8sRUFBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU87U0FDMUIsQ0FBQTtRQUNELFlBQVksR0FBRyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQTtRQUMzQyxZQUFZLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFDLElBQUksRUFBRSxDQUFDLENBQUE7UUFDbEUsRUFBRSxDQUFDLFlBQVksQ0FBQztZQUNkLEtBQUssRUFBRSxDQUFDO1NBQ1QsQ0FBQyxDQUFBO0lBQ04sQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgeyBJTXlBcHAgfSBmcm9tICcuLi8uLi8uLi9hcHAnXHJcblxyXG5jb25zdCBhcHAgPSBnZXRBcHA8SU15QXBwPigpXHJcbmxldCBldmVudENoYW5uZWxcclxubGV0IGQgPSBuZXcgRGF0ZSgpXHJcblBhZ2Uoe1xyXG4gIGRhdGE6IHtcclxuICAgIGVtcGxveWVlSWQ6IG51bGwsXHJcbiAgICBlbXBsb3llZU5hbWU6IG51bGwsXHJcbiAgICBkZXB0SWQ6IG51bGwsXHJcbiAgICBkZXB0TmFtZTogbnVsbCxcclxuICAgIHljcnE6IGQudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApLFxyXG4gICAga3I6ICcnLFxyXG4gICAgY29udGFjdDogJycsXHJcbiAgICBjZnNmOiBcIlwiLFxyXG4gICAgY2ZjczogXCJcIixcclxuICAgIGFkZHJlc3MxOiBcIlwiLFxyXG4gICAgbWRzZjogXCJcIixcclxuICAgIG1kY3M6IFwiXCIsXHJcbiAgICBhZGRyZXNzMjogXCJcIixcclxuICAgIHN5OiAnJyxcclxuICAgIGtleXVzZXI6ICcnLFxyXG4gICAgc2hvd1RpbWU6IGZhbHNlLFxyXG4gICAgc2hvd0RhdGVJbml0OiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgIGZvcm1hdHRlcih0eXBlLCB2YWx1ZSkge1xyXG4gICAgICBpZiAodHlwZSA9PT0gJ3llYXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfeW5tGA7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ21vbnRoJykge1xyXG4gICAgICAgIHJldHVybiBgJHt2YWx1ZX3mnIhgO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkYXknKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfeaXpWA7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfSxcclxuICAgIGNvbXBhbnk6XCJcIlxyXG4gIH0sXHJcbiAgb25Mb2FkKCkge1xyXG4gICAgd3guc2hvd0xvYWRpbmcoe1xyXG4gICAgICB0aXRsZTogJ+WKoOi9veS4rScsXHJcbiAgICB9KVxyXG4gICAgZXZlbnRDaGFubmVsID0gdGhpcy5nZXRPcGVuZXJFdmVudENoYW5uZWwoKVxyXG4gICAgZXZlbnRDaGFubmVsLm9uKCdvcGVuRGV0YWlsJywgKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLmlzTmV3KSB7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgICAgICBlbXBsb3llZUlkOiBhcHAuZ2xvYmFsRGF0YS5lbXBsb3llZUlkLFxyXG4gICAgICAgICAgZW1wbG95ZWVOYW1lOiBhcHAuZ2xvYmFsRGF0YS5lbXBsb3llZU5hbWUsXHJcbiAgICAgICAgICBkZXB0SWQ6IGFwcC5nbG9iYWxEYXRhLmRlZmF1bHREZXB0SWQsXHJcbiAgICAgICAgICBkZXB0TmFtZTogYXBwLmdsb2JhbERhdGEuZGVmYXVsdERlcHROYW1lXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgICAgIGVtcGxveWVlSWQ6IHJlcy5kYXRhLmVtcGxveWVlSWQsXHJcbiAgICAgICAgICBlbXBsb3llZU5hbWU6IHJlcy5kYXRhLmVtcGxveWVlTmFtZSxcclxuICAgICAgICAgIGRlcHRJZDogcmVzLmRhdGEuZGVwdElkLFxyXG4gICAgICAgICAgZGVwdE5hbWU6IHJlcy5kYXRhLmRlcHROYW1lLFxyXG4gICAgICAgICAgeWNycTogcmVzLmRhdGEueWNycSxcclxuICAgICAgICAgIGtyOiByZXMuZGF0YS5rcixcclxuICAgICAgICAgIGNvbnRhY3Q6IHJlcy5kYXRhLmNvbnRhY3QsXHJcbiAgICAgICAgICBjZnNmOiByZXMuZGF0YS5jZnNmLFxyXG4gICAgICAgICAgY2ZjczogcmVzLmRhdGEuY2ZjcyxcclxuICAgICAgICAgIGFkZHJlc3MxOiByZXMuZGF0YS5hZGRyZXNzMSxcclxuICAgICAgICAgIG1kc2Y6IHJlcy5kYXRhLm1kc2YsXHJcbiAgICAgICAgICBtZGNzOiByZXMuZGF0YS5tZGNzLFxyXG4gICAgICAgICAgYWRkcmVzczI6IHJlcy5kYXRhLmFkZHJlc3MyLFxyXG4gICAgICAgICAgc3k6IHJlcy5kYXRhLnN5LFxyXG4gICAgICAgICAgY29tcGFueTpyZXMuZGF0YS5jb21wYW55XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHd4LmhpZGVMb2FkaW5nKClcclxuICB9LFxyXG4gIHNsdHdvcmRJbnB1dChlKSB7XHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAga2V5dXNlcjogZS5kZXRhaWwudmFsdWVcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgYmluZFVzZXJTZWxlY3QoZSkge1xyXG4gICAgbGV0IHRoYXQgPSB0aGlzXHJcbiAgICB3eC5uYXZpZ2F0ZVRvKHtcclxuICAgICAgdXJsOiAnLi4vLi4vLi4vcGFnZXMvdXNlclNlbGVjdC91c2VyU2VsZWN0P3VzZXJJbmZvPScgKyB1c2VySW5wdXQsXHJcbiAgICAgIGV2ZW50czoge1xyXG4gICAgICAgIHJldHVyblVzZXJTZWxlY3Q6IGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgICBlbXBsb3llZUlkOiByZXMuayxcclxuICAgICAgICAgICAgICBlbXBsb3llZU5hbWU6cmVzLnZcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3MocmVzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICB9LFxyXG4gIGJpbmREZXB0U2VsZWN0KGUpIHtcclxuICAgIGxldCB0aGF0ID0gdGhpc1xyXG4gICAgd3gubmF2aWdhdGVUbyh7XHJcbiAgICAgIHVybDogJy4uL2RlcHRTZWxlY3QvZGVwdFNlbGVjdD9lbXBsb3llZWlkPScgKyB0aGlzLmRhdGEuZW1wbG95ZWVJZCxcclxuICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgcmV0dXJuRGVwdFNlbGVjdDogZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgICAgICB0aGF0LnNldERhdGEhKHtcclxuICAgICAgICAgICAgICBkZXB0SWQ6IHJlcy5rLFxyXG4gICAgICAgICAgICAgIGRlcHROYW1lOiByZXMuayArICctJyArIHJlcy52XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzKHJlcykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9LFxyXG5cclxuICBiaW5kT3ZlcnRpbWVDaGFuZ2UoZSkge1xyXG4gICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgIGhvdXI6IGUuZGV0YWlsLnZhbHVlXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgYmluZEtyQ2hhbmdlKGUpIHtcclxuICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgIGtyOiBlLmRldGFpbFxyXG4gICAgfSlcclxuICB9LFxyXG4gIGJpbmRDb250YWN0Q2hhbmdlKGUpIHtcclxuICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgIGNvbnRhY3Q6IGUuZGV0YWlsXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgYmluZENmc2ZDaGFuZ2UoZSkge1xyXG4gICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgY2ZzZjogZS5kZXRhaWxcclxuICAgIH0pXHJcbiAgfSxcclxuICBiaW5kQ2Zjc0NoYW5nZShlKSB7XHJcbiAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICBjZmNzOiBlLmRldGFpbFxyXG4gICAgfSlcclxuICB9LFxyXG4gIGJpbmRBZGRyZXNzMUNoYW5nZShlKSB7XHJcbiAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICBhZGRyZXNzMTogZS5kZXRhaWxcclxuICAgIH0pXHJcbiAgfSxcclxuICBiaW5kTWRzZkNoYW5nZShlKSB7XHJcbiAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICBtZHNmOiBlLmRldGFpbFxyXG4gICAgfSlcclxuICB9LFxyXG4gIGJpbmRNZGNzQ2hhbmdlKGUpIHtcclxuICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgIG1kY3M6IGUuZGV0YWlsXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgYmluZEFkZHJlc3MyQ2hhbmdlKGUpIHtcclxuICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgIGFkZHJlc3MyOiBlLmRldGFpbFxyXG4gICAgfSlcclxuICB9LFxyXG4gIGJpbmRDb21wYW55Q2hhbmdlKGUpIHtcclxuICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgIGNvbXBhbnk6IGUuZGV0YWlsXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgYmluZFN5Q2hhbmdlKGUpIHtcclxuICAgIHRoaXMuc2V0RGF0YSEoe1xyXG4gICAgICBzeTogZS5kZXRhaWwudmFsdWVcclxuICAgIH0pXHJcbiAgfSxcclxuICBcclxuICBiaW5kUGlja2VyRGF0ZShlKSB7XHJcbiAgICB0aGlzLm9wZW5QaWNrZXJEYXRlKCk7XHJcbiAgfSxcclxuICBiaW5kQ2xvc2VEYXRlKGUpIHtcclxuICAgIHRoaXMuY2xvc2VQaWNrZXJEYXRlKCk7XHJcbiAgfSxcclxuXHJcbiAgYmluZERhdGVDYW5jZWwoZSkge1xyXG4gICAgdGhpcy5jbG9zZVBpY2tlckRhdGUoKTtcclxuICB9LFxyXG4gIGJpbmREYXRlQ29uZmlybShlKSB7XHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgeWNycTogdGhpcy5kYXRlRm9ybWF0Rm9yWVlNTUREKGUuZGV0YWlsKVxyXG4gICAgfSlcclxuICAgIHRoaXMuY2xvc2VQaWNrZXJEYXRlKCk7XHJcbiAgfSxcclxuICBvcGVuUGlja2VyRGF0ZSgpIHtcclxuICAgIHRoaXMuc2V0RGF0YSEoe1xyXG4gICAgICBzaG93RGF0ZTogdHJ1ZVxyXG4gICAgfSlcclxuICB9LFxyXG4gIGNsb3NlUGlja2VyRGF0ZSgpIHtcclxuICAgIHRoaXMuc2V0RGF0YSEoe1xyXG4gICAgICBzaG93RGF0ZTogZmFsc2VcclxuICAgIH0pXHJcbiAgfSxcclxuICBkYXRlRm9ybWF0Rm9yWVlNTUREKGRhdGUpIHtcclxuICAgIGxldCBkYXRlVGVtcCA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgbGV0IHllYXIgPSBkYXRlVGVtcC5nZXRGdWxsWWVhcigpO1xyXG4gICAgbGV0IG1vbnRoID0gZGF0ZVRlbXAuZ2V0TW9udGgoKSArIDE7XHJcbiAgICBsZXQgZGF5ID0gZGF0ZVRlbXAuZ2V0RGF0ZSgpO1xyXG4gICAgbGV0IGhvdXIgPSBkYXRlVGVtcC5nZXRIb3VycygpO1xyXG4gICAgbGV0IG1pbnV0ZSA9IGRhdGVUZW1wLmdldE1pbnV0ZXMoKTtcclxuICAgIGxldCBkYXlUZW1wID0geWVhciArIFwiLVwiICsgbW9udGggKyBcIi1cIiArIGRheTtcclxuICAgIHJldHVybiBkYXlUZW1wO1xyXG4gIH0sXHJcblxyXG4gIGZvcm1TdWJtaXQoZSkge1xyXG4gICAgbGV0IGVycm1zZyA9ICcnXHJcbiAgICBpZiAodGhpcy5kYXRhLnljcnEgPT0gJycpIHtcclxuICAgICAgZXJybXNnICs9IFwi6K+36YCJ5oup55So6L2m5pel5pyfXFxyXFxuXCJcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRhdGEuY2ZzZiA9PSAnJykge1xyXG4gICAgICBlcnJtc2cgKz0gXCLor7fovpPlhaXlh7rlj5HnnIHku71cXHJcXG5cIlxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGF0YS5jZmNzID09ICcnKSB7XHJcbiAgICAgIGVycm1zZyArPSBcIuivt+i+k+WFpeWHuuWPkeWfjuW4glxcclxcblwiXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kYXRhLmFkZHJlc3MxID09ICcnKSB7XHJcbiAgICAgIGVycm1zZyArPSBcIuivt+i+k+WFpeWHuuWPkeivpue7huWcsOWdgFxcclxcblwiXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kYXRhLm1kc2YgPT0gJycpIHtcclxuICAgICAgZXJybXNnICs9IFwi6K+36L6T5YWl55uu55qE55yB5Lu9XFxyXFxuXCJcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRhdGEubWRjcyA9PSAnJykge1xyXG4gICAgICBlcnJtc2cgKz0gXCLor7fovpPlhaXnm67nmoTln47luIJcXHJcXG5cIlxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGF0YS5hZGRyZXNzMiA9PSAnJykge1xyXG4gICAgICBlcnJtc2cgKz0gXCLor7fovpPlhaXnm67nmoTor6bnu4blnLDlnYBcXHJcXG5cIlxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGF0YS5zeSA9PSAnJykge1xyXG4gICAgICBlcnJtc2cgKz0gXCLor7fovpPlhaXkuovnlLFcXHJcXG5cIlxyXG4gICAgfVxyXG4gICAgaWYoZXJybXNnIT0nJyl7XHJcbiAgICAgIHd4LnNob3dNb2RhbCh7XHJcbiAgICAgICAgdGl0bGU6ICfns7vnu5/mj5DnpLonLFxyXG4gICAgICAgIGNvbnRlbnQ6IGVycm1zZyxcclxuICAgICAgICBzaG93Q2FuY2VsOiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgICBsZXQgbmV3T2JqZWN0ID0ge1xyXG4gICAgICAgIGVtcGxveWVlSWQ6IHRoaXMuZGF0YS5lbXBsb3llZUlkLFxyXG4gICAgICAgIGVtcGxveWVlTmFtZTogdGhpcy5kYXRhLmVtcGxveWVlTmFtZSxcclxuICAgICAgICBkZXB0SWQ6IHRoaXMuZGF0YS5kZXB0SWQsXHJcbiAgICAgICAgZGVwdE5hbWU6IHRoaXMuZGF0YS5kZXB0TmFtZSxcclxuICAgICAgICB5Y3JxOiB0aGlzLmRhdGEueWNycSxcclxuICAgICAgICBrcjogdGhpcy5kYXRhLmtyLFxyXG4gICAgICAgIGNvbnRhY3Q6IHRoaXMuZGF0YS5jb250YWN0LFxyXG4gICAgICAgIGNmc2Y6IHRoaXMuZGF0YS5jZnNmLFxyXG4gICAgICAgIGNmY3M6IHRoaXMuZGF0YS5jZmNzLFxyXG4gICAgICAgIGFkZHJlc3MxOiB0aGlzLmRhdGEuYWRkcmVzczEsXHJcbiAgICAgICAgbWRzZjogdGhpcy5kYXRhLm1kc2YsXHJcbiAgICAgICAgbWRjczogdGhpcy5kYXRhLm1kY3MsXHJcbiAgICAgICAgYWRkcmVzczI6IHRoaXMuZGF0YS5hZGRyZXNzMixcclxuICAgICAgICBzeTogdGhpcy5kYXRhLnN5LFxyXG4gICAgICAgIGNvbXBhbnk6dGhpcy5kYXRhLmNvbXBhbnlcclxuICAgICAgfVxyXG4gICAgICBldmVudENoYW5uZWwgPSB0aGlzLmdldE9wZW5lckV2ZW50Q2hhbm5lbCgpXHJcbiAgICAgIGV2ZW50Q2hhbm5lbC5lbWl0KCdyZXR1cm5EZXRhaWwnLCB7IGRhdGE6IG5ld09iamVjdCwgaXNOZXc6dHJ1ZSB9KVxyXG4gICAgICB3eC5uYXZpZ2F0ZUJhY2soe1xyXG4gICAgICAgIGRlbHRhOiAxXHJcbiAgICAgIH0pXHJcbiAgfVxyXG59KVxyXG4iXX0=